---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";

const projects = (await getCollection("store"))
  .sort((a, b) => new Date(b.data.updatedDate).getTime() - new Date(a.data.updatedDate).getTime());
---

<BaseLayout title="Projects" sideBarActiveItemID="projects">
  <div class="mb-6">
    <div class="text-3xl w-full font-bold">Projects</div>
    <div class="opacity-70 mt-2">
      Selected work across SRE / backend / data pipelines.
    </div>
  </div>

  {projects.map((p, idx) => (
    <>
      <HorizontalCard
        title={p.data.title}
        img={p.data.heroImage}
        desc={p.data.description}
        url={p.data.custom_link || p.data.checkoutUrl || "#"}
        badge={p.data.badge}
      />
      {idx < projects.length - 1 && <div class="divider my-0"></div>}
    </>
  ))}
</BaseLayout>
